<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Display Test</title>
    <link rel="stylesheet" href="src/renderer/css/components.css">
    <link rel="stylesheet" href="src/renderer/css/themes.css">
    <link rel="stylesheet" href="src/renderer/css/progress.css">
    <link rel="stylesheet" href="src/renderer/css/results.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: var(--color-bg-primary, #fff);
        }
        .test-controls {
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-controls button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            background: #007acc;
            color: white;
            cursor: pointer;
        }
        .test-controls button:hover {
            background: #005a9e;
        }
    </style>
</head>
<body>
    <h1>é€²æ—è¡¨ç¤ºãƒ»çµæœè¡¨ç¤ºUIãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-controls">
        <h2>ãƒ†ã‚¹ãƒˆæ“ä½œ</h2>
        <button onclick="testProgressStart()">ğŸ“Š é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testProgressComplete()">âœ… å®Œäº†è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testProgressError()">âŒ ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testResultsShow()">ğŸ“‹ çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
    </div>

    <!-- JavaScript -->
    <script src="src/renderer/js/utils.js"></script>
    <script src="src/renderer/js/progress-display.js"></script>
    <script src="src/renderer/js/results-display.js"></script>
    
    <script>
        let progressDisplay;
        let resultsDisplay;
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            progressDisplay = new ProgressDisplay();
            resultsDisplay = new ResultsDisplay();
            console.log('ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–å®Œäº†');
        });
        
        // é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testProgressStart() {
            progressDisplay.startProgress(100, { initialMessage: 'ãƒ†ã‚¹ãƒˆé–‹å§‹...' });
            
            // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            let current = 0;
            const interval = setInterval(() => {
                current += Math.random() * 5;
                if (current >= 100) {
                    current = 100;
                    clearInterval(interval);
                }
                
                progressDisplay.updateProgress(
                    Math.floor(current), 
                    100, 
                    `/test/file${Math.floor(current)}.js`,
                    { changesCount: Math.floor(current * 2.3) }
                );
                
                if (current >= 100) {
                    setTimeout(() => {
                        testProgressComplete();
                    }, 1000);
                }
            }, 200);
        }
        
        // å®Œäº†è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testProgressComplete() {
            const results = {
                modifiedFiles: 42,
                totalChanges: 156,
                executionTime: 23000
            };
            
            progressDisplay.showComplete(results);
        }
        
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testProgressError() {
            progressDisplay.startProgress(50);
            
            setTimeout(() => {
                progressDisplay.showError('ãƒ†ã‚¹ãƒˆç”¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
            }, 2000);
        }
        
        // çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testResultsShow() {
            const mockResults = {
                modifiedFiles: 15,
                totalFiles: 20,
                totalChanges: 42,
                executionTime: 12500,
                fileResults: [
                    {
                        filePath: '/test/project/src/main.js',
                        changes: [
                            { from: 'oldFunction', to: 'newFunction', count: 3 },
                            { from: 'oldClass', to: 'newClass', count: 1 }
                        ],
                        totalChanges: 4
                    },
                    {
                        filePath: '/test/project/src/utils.js',
                        changes: [
                            { from: 'oldVariable', to: 'newVariable', count: 7 },
                            { from: 'isEnabled', to: 'isActive', count: 2 }
                        ],
                        totalChanges: 9
                    },
                    {
                        filePath: '/test/project/styles/main.css',
                        changes: [
                            { from: '.old-btn', to: '.btn-primary', count: 5 },
                            { from: 'margin-left', to: 'margin-inline-start', count: 12 }
                        ],
                        totalChanges: 17
                    }
                ],
                errors: []
            };
            
            resultsDisplay.show(mockResults);
        }
    </script>
</body>
</html>