<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Grep Replacer - Modern UI Test</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="src/renderer/css/components.css">
    <link rel="stylesheet" href="src/renderer/css/themes.css">
    <link rel="stylesheet" href="src/renderer/css/animations.css">
    <link rel="stylesheet" href="src/renderer/css/main.css">
    
    <style>
        /* ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            background-color: var(--bg-secondary);
        }
        
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .test-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .test-button {
            padding: 8px 16px;
            border: 1px solid var(--border-primary);
            border-radius: 4px;
            background-color: var(--button-bg);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-button:hover {
            background-color: var(--button-hover-bg);
            transform: translateY(-1px);
        }
        
        .test-output {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            min-height: 50px;
            white-space: pre-wrap;
            border: 1px solid var(--border-primary);
        }
        
        .tooltip-test-area {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        
        .tooltip-item {
            padding: 10px;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-primary);
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
        }
        
        .shortcut-test {
            background-color: var(--info-light);
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .drag-drop-zone {
            border: 2px dashed var(--border-primary);
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            background-color: var(--bg-primary);
            transition: all 0.3s ease;
        }
        
        .drag-drop-zone.drag-over {
            border-color: var(--accent-primary);
            background-color: var(--accent-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <header style="text-align: center; padding: 20px;">
            <h1>Multi Grep Replacer - Modern UI/UX ãƒ†ã‚¹ãƒˆ</h1>
            <p>Modern UI/UXæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§ã™</p>
        </header>

        <!-- ãƒ†ãƒ¼ãƒãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">ğŸŒ™ ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="test-button" onclick="testThemeSwitch('light')">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</button>
                <button class="test-button" onclick="testThemeSwitch('dark')">ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</button>
                <button class="test-button" onclick="testThemeSwitch('auto')">è‡ªå‹•ãƒ¢ãƒ¼ãƒ‰</button>
            </div>
            <div class="test-output" id="themeOutput">ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆã®ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        </section>

        <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="test-button hover-lift" onclick="testAnimation('fade-in')">ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³</button>
                <button class="test-button hover-scale" onclick="testAnimation('slide-in-up')">ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒƒãƒ—</button>
                <button class="test-button hover-glow" onclick="testAnimation('scale-in')">ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³</button>
                <button class="test-button ripple" onclick="testAnimation('pulse')">ãƒ‘ãƒ«ã‚¹</button>
                <button class="test-button" onclick="testAnimation('shake')">ã‚·ã‚§ã‚¤ã‚¯</button>
                <button class="test-button" onclick="testAnimation('bounce')">ãƒã‚¦ãƒ³ã‚¹</button>
            </div>
            <div class="test-output" id="animationOutput">
                <div id="animationTarget" style="width: 100px; height: 100px; background: var(--accent-primary); margin: 10px auto; border-radius: 8px;">
                    ãƒ†ã‚¹ãƒˆå¯¾è±¡
                </div>
            </div>
        </section>

        <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">ğŸ’¬ ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãƒ†ã‚¹ãƒˆ</h2>
            <div class="tooltip-test-area">
                <div class="tooltip-item" data-tooltip="ã“ã‚Œã¯åŸºæœ¬çš„ãªãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ã™">åŸºæœ¬ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—</div>
                <div class="tooltip-item" title="titleå±æ€§ã«ã‚ˆã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—">titleå±æ€§</div>
                <button class="tooltip-item" aria-label="ãƒœã‚¿ãƒ³ã®ARIAãƒ©ãƒ™ãƒ«">ARIAãƒ©ãƒ™ãƒ«</button>
                <div class="tooltip-item" data-tooltip="é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ã™ã€‚è¤‡æ•°è¡Œã«ã‚ãŸã£ã¦è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚">é•·ã„ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—</div>
            </div>
            <div class="test-output" id="tooltipOutput">ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’ãƒ›ãƒãƒ¼ã—ã¦å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„</div>
        </section>

        <!-- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="shortcut-test">
                <strong>åˆ©ç”¨å¯èƒ½ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ:</strong><br>
                â€¢ Ctrl/Cmd + S: è¨­å®šä¿å­˜ï¼ˆãƒ†ã‚¹ãƒˆï¼‰<br>
                â€¢ Ctrl/Cmd + O: è¨­å®šèª­ã¿è¾¼ã¿ï¼ˆãƒ†ã‚¹ãƒˆï¼‰<br>
                â€¢ Ctrl/Cmd + E: å®Ÿè¡Œï¼ˆãƒ†ã‚¹ãƒˆï¼‰<br>
                â€¢ F1: ãƒ˜ãƒ«ãƒ—è¡¨ç¤º<br>
                â€¢ ESC: ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹<br>
            </div>
            <div class="test-output" id="shortcutOutput">ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’è©¦ã—ã¦ãã ã•ã„</div>
        </section>

        <!-- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">ğŸ“ ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ãƒ†ã‚¹ãƒˆ</h2>
            <div class="drag-drop-zone" id="testDropZone">
                ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã“ã“ã«ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ãã ã•ã„<br>
                <small>ï¼ˆJSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ä»»æ„ã®ãƒ•ã‚©ãƒ«ãƒ€ï¼‰</small>
            </div>
            <div class="test-output" id="dragDropOutput">ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã®ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        </section>

        <!-- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ -->
        <section class="test-section">
            <h2 class="test-title">ğŸªŸ ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button class="test-button" onclick="testWindowState('info')">ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æƒ…å ±å–å¾—</button>
                <button class="test-button" onclick="testWindowState('center')">ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸­å¤®é…ç½®</button>
                <button class="test-button" onclick="testWindowState('resize')">ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚º</button>
            </div>
            <div class="test-output" id="windowOutput">ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ã®ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        </section>
    </div>

    <!-- JavaScript -->
    <script src="src/renderer/js/utils.js"></script>
    <script src="src/renderer/js/theme-manager.js"></script>
    <script src="src/renderer/js/shortcuts-manager.js"></script>
    <script src="src/renderer/js/tooltip-manager.js"></script>
    <script src="src/renderer/js/drag-drop-handler.js"></script>
    <script src="src/renderer/js/window-state.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let themeManager, shortcutsManager, tooltipManager, dragDropHandler, windowState;

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initializeModernFeatures();
        });

        function initializeModernFeatures() {
            try {
                // Modern UI/UXæ©Ÿèƒ½ã‚’åˆæœŸåŒ–
                themeManager = new ThemeManager();
                tooltipManager = new TooltipManager();
                windowState = new WindowState();
                
                // ç°¡æ˜“UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
                const mockUIController = {
                    handleSaveConfig: () => logShortcut('è¨­å®šä¿å­˜'),
                    handleLoadConfig: () => logShortcut('è¨­å®šèª­ã¿è¾¼ã¿'),
                    handleExecute: () => logShortcut('å®Ÿè¡Œ')
                };
                
                shortcutsManager = new ShortcutsManager(mockUIController);
                dragDropHandler = new DragDropHandler(mockUIController);
                
                // ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³ã‚’æ‰‹å‹•ç™»éŒ²
                const dropZone = document.getElementById('testDropZone');
                dragDropHandler.registerDropZone(dropZone, 'test', {
                    handler: (files) => {
                        const output = document.getElementById('dragDropOutput');
                        output.textContent = `ãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:\n${files.map(f => f.name).join('\n')}`;
                    }
                });

                updateOutput('themeOutput', 'Modern UI/UXæ©Ÿèƒ½ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                console.error('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                updateOutput('themeOutput', `åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ
        function testThemeSwitch(theme) {
            if (themeManager) {
                themeManager.switchTheme(theme);
                updateOutput('themeOutput', 
                    `ãƒ†ãƒ¼ãƒã‚’ ${theme} ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ\n` +
                    `ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ: ${themeManager.getCurrentTheme()}\n` +
                    `é©ç”¨ãƒ†ãƒ¼ãƒ: ${themeManager.getActiveTheme()}`
                );
            } else {
                updateOutput('themeOutput', 'ThemeManager ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
            }
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
        function testAnimation(animationType) {
            const target = document.getElementById('animationTarget');
            if (!target) return;

            // æ—¢å­˜ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            target.className = '';
            
            // æ–°ã—ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            requestAnimationFrame(() => {
                target.classList.add(animationType);
                updateOutput('animationOutput', `${animationType} ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ`);
                
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
                setTimeout(() => {
                    target.classList.remove(animationType);
                }, 2000);
            });
        }

        // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ­ã‚°
        function logShortcut(action) {
            updateOutput('shortcutOutput', 
                `${new Date().toLocaleTimeString()}: ${action} ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ`
            );
        }

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ
        function testWindowState(action) {
            if (!windowState) {
                updateOutput('windowOutput', 'WindowState ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }

            try {
                switch (action) {
                    case 'info':
                        const currentState = windowState.getCurrentState();
                        const screenInfo = windowState.getScreenInfo();
                        updateOutput('windowOutput', 
                            `ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹:\n` +
                            `ã‚µã‚¤ã‚º: ${currentState.width}x${currentState.height}\n` +
                            `ä½ç½®: (${currentState.x}, ${currentState.y})\n` +
                            `æœ€å¤§åŒ–: ${currentState.maximized}\n` +
                            `ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³: ${currentState.fullscreen}\n\n` +
                            `ç”»é¢æƒ…å ±:\n` +
                            `è§£åƒåº¦: ${screenInfo.width}x${screenInfo.height}\n` +
                            `åˆ©ç”¨å¯èƒ½ã‚µã‚¤ã‚º: ${screenInfo.availWidth}x${screenInfo.availHeight}`
                        );
                        break;
                        
                    case 'center':
                        windowState.centerWindow();
                        updateOutput('windowOutput', 'ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä¸­å¤®ã«é…ç½®ã—ã¾ã—ãŸ');
                        break;
                        
                    case 'resize':
                        windowState.setSize(900, 800);
                        updateOutput('windowOutput', 'ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã‚’ 900x800 ã«å¤‰æ›´ã—ã¾ã—ãŸ');
                        break;
                }
            } catch (error) {
                updateOutput('windowOutput', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        // å‡ºåŠ›æ›´æ–°ãƒ˜ãƒ«ãƒ‘ãƒ¼
        function updateOutput(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
            }
        }

        // ãƒšãƒ¼ã‚¸ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        window.addEventListener('beforeunload', () => {
            if (themeManager) themeManager.destroy();
            if (shortcutsManager) shortcutsManager.destroy();
            if (tooltipManager) tooltipManager.destroy();
            if (dragDropHandler) dragDropHandler.destroy();
            if (windowState) windowState.destroy();
        });
    </script>
</body>
</html>